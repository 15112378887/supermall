{"remainingRequest":"D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\thread-loader\\dist\\cjs.js!D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\babel-loader\\lib\\index.js!D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\新建文件夹\\vue.js练习\\项目\\supermall\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\新建文件夹\\vue.js练习\\项目\\supermall\\src\\views\\detail\\Detail.vue","mtime":1571642866622},{"path":"D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\新建文件夹\\vue.js练习\\项目\\supermall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:\\\\\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\\\\vue.js\\u7EC3\\u4E60\\\\\\u9879\\u76EE\\\\supermall\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DetailNav from \"./DetailChild/DetailNav\";\nimport DetailSwiper from \"./DetailChild/DetailSwiper\";\nimport DetailBaseInfo from \"./DetailChild/DetailBaseInfo\";\nimport DetailShopInfo from \"./DetailChild/DetailShopInfo\";\nimport Scroll from \"components/common/scroll/Scroll\";\nimport DetailGoodsInfo from \"./DetailChild/DetailGoodsInfo\";\nimport DetailParamInfo from \"./DetailChild/DetailParamInfo\";\nimport DetailCommentInfo from \"./DetailChild/DetailCommentInfo\";\nimport GoodsList from \"components/content/goods/GoodsList\";\nimport DetailBottomBar from \"./DetailChild/DetailBottomBar\";\nimport { getDetail, Goods, getRecommend, Shop, GoodsParam } from \"network/detail\";\nimport { debounce } from \"common/until\";\nimport { itemListenerMixin, backTopMixin } from \"common/mixin\";\nimport { mapActions } from 'vuex';\nexport default {\n  name: \"Detail\",\n  components: {\n    DetailNav: DetailNav,\n    DetailSwiper: DetailSwiper,\n    DetailBaseInfo: DetailBaseInfo,\n    DetailShopInfo: DetailShopInfo,\n    DetailGoodsInfo: DetailGoodsInfo,\n    DetailParamInfo: DetailParamInfo,\n    DetailCommentInfo: DetailCommentInfo,\n    DetailBottomBar: DetailBottomBar,\n    Scroll: Scroll,\n    GoodsList: GoodsList\n  },\n  mixins: [itemListenerMixin, backTopMixin],\n  data: function data() {\n    return {\n      iid: 0,\n      topImages: [],\n      goods: {},\n      shop: {},\n      detailInfo: {},\n      paramInfo: {},\n      commentInfo: {},\n      recommend: [],\n      navYs: [],\n      getThemeTopY: null,\n      currentIndex: 0\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    //请求数据详情数据\n    this.iid = this.$route.params.iid;\n    getDetail(this.iid).then(function (res) {\n      var data = res.data.result; // 获取详情页轮播图图片\n\n      _this.topImages = data.itemInfo.topImages; //详情页标题信息\n\n      _this.goods = new Goods(data.itemInfo, data.columns, data.shopInfo.services); //详情页店铺信息\n\n      _this.shop = new Shop(data.shopInfo); // 获取详情页展示图片\n\n      _this.detailInfo = data.detailInfo; // 获取详情页参数\n\n      _this.paramInfo = new GoodsParam(data.itemParams.info, data.itemParams.rule); //获取评论信息\n\n      if (data.rate.cRate !== 0) {\n        _this.commentInfo = data.rate.list[0];\n      }\n    }); //请求推荐数据\n\n    getRecommend().then(function (res) {\n      _this.recommend = res.data.data.list;\n    }); //给getThemeTopY赋值\n\n    this.getThemeTopY = debounce(function () {\n      _this.navYs = [];\n\n      _this.navYs.push(0);\n\n      _this.navYs.push(_this.$refs.param.$el.offsetTop + -44);\n\n      _this.navYs.push(_this.$refs.comment.$el.offsetTop + -44);\n\n      _this.navYs.push(_this.$refs.recommend.$el.offsetTop + -44);\n\n      _this.navYs.push(Number.MAX_VALUE);\n    }, 500);\n  },\n  mounted: function mounted() {},\n  destroyed: function destroyed() {\n    this.$bus.$off(\"itemImageLoad\", this.itemListener);\n  },\n  methods: _objectSpread({}, mapActions(['addCart']), {\n    //解决滚动问题\n    itemImageLoad: function itemImageLoad() {\n      this.$refs.scroll.refresh();\n      this.getThemeTopY();\n    },\n    //标题点击滚动到对应页面\n    itemClick: function itemClick(index) {\n      this.$refs.scroll.scrollTo(0, -this.navYs[index], 100);\n    },\n    //根据滚动的页面位置，切换nav的选中状态\n    contentScroll: function contentScroll(position) {\n      var positionY = -position.y;\n      var length = this.navYs.length;\n\n      for (var i = 0; i < length - 1; i++) {\n        if (this.currentIndex !== i && i < length - 1 && positionY >= this.navYs[i] && positionY < this.navYs[i + 1]) {\n          this.currentIndex = i;\n          this.$refs.nav.currentIndex = this.currentIndex;\n        }\n      }\n\n      this.listenShopBack(position);\n    },\n    //获取购物车展示信息\n    addToCart: function addToCart() {\n      var _this2 = this;\n\n      var product = {};\n      product.image = this.topImages[0];\n      product.title = this.goods.title;\n      product.desc = this.goods.desc;\n      product.price = this.goods.realPrice;\n      product.iid = this.iid; //2将商品添加到购物车\n\n      this.addCart(product).then(function (res) {\n        _this2.$toast.show(res, 1000);\n      }); // this.$store.dispatch(\"addCart\", product).then(res => {\n      //   \n      //    \n      // });\n    }\n  })\n};",{"version":3,"sources":["Detail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"detail\">\r\n    <detail-nav class=\"detail-nav\" @itemClick=\"itemClick\" ref=\"nav\"></detail-nav>\r\n\r\n    <scroll class=\"content\" ref=\"scroll\" :probe-type=\"3\" @scroll=\"contentScroll\">\r\n      <detail-swiper :top-images=\"topImages\"></detail-swiper>\r\n      <detail-base-info :goods=\"goods\"></detail-base-info>\r\n      <detail-shop-info :shop=\"shop\"></detail-shop-info>\r\n      <detail-goods-info :detail-info=\"detailInfo\" @itemImageLoad=\"itemImageLoad\"></detail-goods-info>\r\n      <detail-param-info :paramInfo=\"paramInfo\" ref=\"param\"></detail-param-info>\r\n      <detail-comment-info :commentInfo=\"commentInfo\" ref=\"comment\"></detail-comment-info>\r\n      <goods-list :goods=\"recommend\" ref=\"recommend\"></goods-list>\r\n    </scroll>\r\n    <detail-bottom-bar @addToCart=\"addToCart\"></detail-bottom-bar>\r\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"></back-top>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DetailNav from \"./DetailChild/DetailNav\";\r\nimport DetailSwiper from \"./DetailChild/DetailSwiper\";\r\nimport DetailBaseInfo from \"./DetailChild/DetailBaseInfo\";\r\nimport DetailShopInfo from \"./DetailChild/DetailShopInfo\";\r\nimport Scroll from \"components/common/scroll/Scroll\";\r\nimport DetailGoodsInfo from \"./DetailChild/DetailGoodsInfo\";\r\nimport DetailParamInfo from \"./DetailChild/DetailParamInfo\";\r\nimport DetailCommentInfo from \"./DetailChild/DetailCommentInfo\";\r\nimport GoodsList from \"components/content/goods/GoodsList\";\r\nimport DetailBottomBar from \"./DetailChild/DetailBottomBar\";\r\n\r\n\r\nimport {getDetail,Goods,getRecommend,Shop,GoodsParam } from \"network/detail\";\r\nimport { debounce } from \"common/until\";\r\nimport { itemListenerMixin, backTopMixin } from \"common/mixin\";\r\nimport { mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n\r\n  components: {\r\n    DetailNav,\r\n    DetailSwiper,\r\n    DetailBaseInfo,\r\n    DetailShopInfo,\r\n    DetailGoodsInfo,\r\n    DetailParamInfo,\r\n    DetailCommentInfo,\r\n    DetailBottomBar,\r\n\r\n    Scroll,\r\n    GoodsList,\r\n    \r\n    \r\n  },\r\n  mixins: [itemListenerMixin, backTopMixin],\r\n  data() {\r\n    return {\r\n      iid: 0,\r\n      topImages: [],\r\n      goods: {},\r\n      shop: {},\r\n      detailInfo: {},\r\n      paramInfo: {},\r\n      commentInfo: {},\r\n      recommend: [],\r\n      navYs: [],\r\n      getThemeTopY: null,\r\n      currentIndex: 0\r\n    };\r\n  },\r\n\r\n  created() {\r\n    //请求数据详情数据\r\n    this.iid = this.$route.params.iid;\r\n    getDetail(this.iid).then(res => {\r\n      const data = res.data.result;\r\n      // 获取详情页轮播图图片\r\n      this.topImages = data.itemInfo.topImages;\r\n      //详情页标题信息\r\n      this.goods = new Goods(\r\n        data.itemInfo,\r\n        data.columns,\r\n        data.shopInfo.services\r\n      );\r\n      //详情页店铺信息\r\n      this.shop = new Shop(data.shopInfo);\r\n      // 获取详情页展示图片\r\n      this.detailInfo = data.detailInfo;\r\n      // 获取详情页参数\r\n      this.paramInfo = new GoodsParam(\r\n        data.itemParams.info,\r\n        data.itemParams.rule\r\n      );\r\n      //获取评论信息\r\n      if (data.rate.cRate !== 0) {\r\n        this.commentInfo = data.rate.list[0];\r\n      }\r\n    });\r\n    //请求推荐数据\r\n    getRecommend().then(res => {\r\n      this.recommend = res.data.data.list;\r\n    });\r\n    //给getThemeTopY赋值\r\n    this.getThemeTopY = debounce(() => {\r\n      this.navYs = [];\r\n      this.navYs.push(0);\r\n      this.navYs.push(this.$refs.param.$el.offsetTop + -44);\r\n      this.navYs.push(this.$refs.comment.$el.offsetTop + -44);\r\n      this.navYs.push(this.$refs.recommend.$el.offsetTop + -44);\r\n      this.navYs.push(Number.MAX_VALUE);\r\n    }, 500);\r\n  },\r\n  mounted() {},\r\n\r\n  destroyed() {\r\n    this.$bus.$off(\"itemImageLoad\", this.itemListener);\r\n  },\r\n  methods: {\r\n    ...mapActions(['addCart']),\r\n    //解决滚动问题\r\n    itemImageLoad() {\r\n      this.$refs.scroll.refresh();\r\n      this.getThemeTopY();\r\n    },\r\n    //标题点击滚动到对应页面\r\n    itemClick(index) {\r\n      this.$refs.scroll.scrollTo(0, -this.navYs[index], 100);\r\n    },\r\n    //根据滚动的页面位置，切换nav的选中状态\r\n    contentScroll(position) {\r\n      const positionY = -position.y;\r\n      let length = this.navYs.length;\r\n      for (let i = 0; i < length - 1; i++) {\r\n        if (\r\n          this.currentIndex !== i &&\r\n          (i < length - 1 &&\r\n            positionY >= this.navYs[i] &&\r\n            positionY < this.navYs[i + 1])\r\n        ) {\r\n          this.currentIndex = i;\r\n          this.$refs.nav.currentIndex = this.currentIndex;\r\n        }\r\n      }\r\n      this.listenShopBack(position);\r\n    },\r\n    //获取购物车展示信息\r\n    addToCart() {\r\n      const product = {};\r\n      product.image = this.topImages[0];\r\n      product.title = this.goods.title;\r\n      product.desc = this.goods.desc;\r\n      product.price = this.goods.realPrice;\r\n      product.iid = this.iid;\r\n\r\n      //2将商品添加到购物车\r\n      this.addCart(product).then(res => {\r\n       this.$toast.show(res, 1000)\r\n        \r\n      })\r\n      // this.$store.dispatch(\"addCart\", product).then(res => {\r\n      //   \r\n      //    \r\n      // });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#detail {\r\n  position: relative;\r\n  z-index: 9;\r\n  background-color: #ffffff;\r\n  height: 100vh;\r\n}\r\n.detail-nav {\r\n  position: relative;\r\n  background-color: #ffffff;\r\n  z-index: 9;\r\n}\r\n.content {\r\n  height: calc(100% - 44px - 49px);\r\n}\r\n</style>>\r\n\r\n\r\n"],"sourceRoot":"src/views/detail"}]}